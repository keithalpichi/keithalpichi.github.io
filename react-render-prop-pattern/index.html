<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Keith Alpichi">
    <meta name="description" content="Keith Alpichi&#39;s Portfolio &amp; Blog">
    <meta name="keywords" content="blog,software engineer,software,developer,web development,code">

    <base href="/">
    <title>
  Learn React’s “Render” Prop Pattern By Building A Pop-Up Modal · Keith Alpichi
</title>

    <link rel="canonical" href="/react-render-prop-pattern/">

    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="/css/style.min.css">

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.40.2" />
  </head>

  <body>
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Keith Alpichi
    </a>
    
    <ul class="navigation-list float-right">
      
      <li class="navigation-item">
        <a class="navigation-link" href="/posts/">Blog</a>
      </li>
      
      <li class="navigation-item">
        <a class="navigation-link" href="/about/">About</a>
      </li>
      
      <li class="navigation-item">
        <a class="navigation-link" href="/projects/">Projects</a>
      </li>
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
  <article>
    <header>
      <h1 class="title">Learn React’s “Render” Prop Pattern By Building A Pop-Up Modal</h1>
      <h2 class="date">May 6, 2018</h2>

      
    </header>

    

<p>The first time I came across the pattern of the <code>render</code> prop was in v3 of the wonderful React-Router library. That was nearly 2 years ago. I’ve used it here and there but I didn’t realize all the beauty behind it until I recently learned it was being used as an <a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce">alternative to HOC’s</a>. It was also introduced into React 16. The <code>render</code> prop was clearly a pattern I needed to revisit!</p>

<p>Unfortunately for me, my company has been using an older version of React and I’m so behind with all the updates to React. However, since it’s just a pattern it doesn’t matter the version because it can be implemented in just a few lines of code. Let me first define what this pattern is and then we’ll go through an example to see how it works.</p>

<h2 id="what-is-a-render-prop">What is a Render Prop?</h2>

<p>In the React documentation it is:</p>

<blockquote>
<p>a simple technique for sharing code between React components using a prop whose value is a function</p>
</blockquote>

<p>Huh? Okay. Let’s turn to <a href="https://medium.com/@mjackson">Michael Jackson</a>, who explains in his article <a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce">Use a Render Prop!</a> that a render prop is:</p>

<blockquote>
<p>a function prop that a component uses to know what to render
Better? The definition may be hard to grasp. So let’s build something to learn how it works.</p>
</blockquote>

<h2 id="a-simple-pop-up-modal">A Simple Pop-Up Modal</h2>

<p>What we’ll build is a simple pop-up modal. Let’s think about how a modal works:</p>

<ul>
<li>A modal can pop-up (open) by some action, normally displaying in front of or on top of other HTML elements</li>
<li>A modal can close, by itself or by some other action</li>
</ul>

<p>Let’s now think about how we can modularize this idea:</p>

<ul>
<li>A modal should only care about hiding and displaying in front of or on top of other HTML elements</li>
<li>The React components that use the modal should have the responsibility of what is in the modal and how to interact with it and let the modal perform it’s duties explained in the previous point</li>
</ul>

<p>Let’s implement point #2 so we can see how we’ll be using the pop-up modal.</p>

<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">close</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// process submit then call `close`
</span><span class="c1"></span><span class="p">}</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nx">Modal</span>
      <span class="nx">render</span><span class="p">=({</span> <span class="nx">close</span> <span class="p">})</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="p">&lt;</span><span class="nx">form</span> <span class="nx">onSubmit</span><span class="p">={(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">close</span><span class="p">)}&gt;</span>
          <span class="p">&lt;</span><span class="nx">input</span> <span class="kd">type</span><span class="p">=</span><span class="s">&#34;text&#34;</span> <span class="nx">name</span><span class="p">=</span><span class="s">&#34;username&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nx">input</span> <span class="kd">type</span><span class="p">=</span><span class="s">&#34;text&#34;</span> <span class="nx">name</span><span class="p">=</span><span class="s">&#34;password&#34;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nx">button</span> <span class="kd">type</span><span class="p">=</span><span class="err">&#34;</span><span class="nx">submit</span><span class="p">&gt;</span><span class="nx">Log</span> <span class="nx">In</span><span class="p">&lt;</span><span class="o">/</span><span class="nx">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="o">/</span><span class="nx">form</span><span class="p">&gt;</span>
      <span class="p">}</span>
    <span class="o">/</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>This component renders a <code>Modal</code> component and provides a <code>render</code> function as a prop. You’ll see this in a second but essentially the <code>Modal</code> component will call the <code>render</code> function to render the form content you see above. We are saying, “hey Modal, here, take this render function. Render your content, then when you’re ready call the render function and I’ll take care of what it returns. Just provide me a close method please.”</p>

<p>Before <code>render</code>, you’d have most of the logic, state, and HTML elements within the <code>Modal</code> component, or render children inside it, or create instances of HOC’s. With <code>render</code>, the <strong>parent is given the responsibility to render what logically should be viewed and controlled by them</strong>. This relieves the <code>Modal</code> from containing any irrelevant code besides it’s logic to open and close.</p>

<p>More interestingly is that <code>Modal</code> can provide basically anything to the <code>render</code> function that the parent can utilize. In this example the <code>render</code> function contains a single object as it’s argument but you can imagine what else could be provided; especially in a more complex example.</p>

<p>Let’s see what the <code>Modal</code> class looks like.</p>

<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">class</span> <span class="nx">Modal</span> <span class="k">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">open</span><span class="o">:</span> <span class="kc">false</span> <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">open</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">close</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">open</span><span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="p">{</span> <span class="nx">open</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">const</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">open</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Open</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
        <span class="p">{</span><span class="nx">open</span> <span class="o">&amp;&amp;</span>
          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;modal&#34;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;bg&#34;</span> <span class="err">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;fg&#34;</span><span class="o">&gt;</span>
              <span class="p">{</span><span class="nx">render</span><span class="p">({</span> <span class="nx">close</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">close</span> <span class="p">})}</span>
            <span class="o">&lt;</span><span class="err">/div&gt;</span>
          <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="p">}</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="p">);</span>  
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Let’s assume all the styling for positioning, z-indexes, and displays are correctly set. I’ve placed some CSS classes to help explain what’s going on. Let’s review what we have here:</p>

<ul>
<li>initially the modal is not opened and only renders a button. The div with the class <code>modal</code> will not display since the modal state is not open.
once the button is clicked the modal will open and the div with the class <code>modal</code> will display. The div with the class <code>bg</code> will cover and blur the entire window while the div with the class <code>fg</code> will contain the modal content.</li>
<li>the <code>render</code> function will get called with a single object with the <code>close</code> function as one of it’s properties.</li>
</ul>

<p>Pay close attention to the <code>render</code> prop. By calling this function with the <code>close</code> method, the modal is essentially allowing the parent to close the modal. It will be the parent components job to call at a later, more opportune time. In the example earlier, the parent component called <code>close</code> after the form was submitted. Sweet huh?</p>

<h2 id="let-s-review-our-example">Let’s Review Our Example</h2>

<p>The modal achieves it’s goals of opening and closing. It also shares this logic with parent components so they, too, can support those goals.</p>

<p>The parent component provides, what I like to call, a “render callback prop” that allows us to achieve a few things:</p>

<ul>
<li>providing the modal component with a callback helps achieve the concept of separation of concern.</li>
<li>aesthetically, the code we want to see in this component stays within it. It’s not in the modal component; a component that may exist in another file. To debug or visualize how the HTML content will display it is all in one place in the <code>render</code> function of the component.</li>
<li>since the <code>render</code> callback prop is defined in the parent component it will continue to have access to it’s scope. This allowed the parent to call <code>this.handleSubmit</code> and at the same time, use variables provided by the modal.
the render callback prop was provided in-line. We could have easily created another component to utilize React’s lifecycle methods and provide that instead.</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<ul>
<li><code>render</code> prop is another tool to add to your tool belt; use it when you need to. It’s use cases are similar to HOC’s but the approach is different.</li>
<li>remember that every time the child’s <code>render</code> function is called so does the <code>render</code> callback prop. Furthermore, every render of the parent component adds to this number of renders as well.</li>
</ul>

<h2 id="additional-resources">Additional Resources:</h2>

<ul>
<li><a href="https://reactjs.org/docs/render-props.html">https://reactjs.org/docs/render-props.html</a></li>
<li><a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce">https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/Route/render-func">https://reacttraining.com/react-router/web/api/Route/render-func</a></li>
<li><a href="https://reactjs.org/docs/higher-order-components.html">https://reactjs.org/docs/higher-order-components.html</a></li>
</ul>

  </article>

  <br/>

  
      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "keithalpichi" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  
  
</section>

      </div>

      <footer class="footer">
  <section class="container">
    © 2018 · Powered by <a href="http://keithalpichi.com/">Keith Alpichi</a>.
  </section>
</footer>

    </main>

    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-49683420-3', 'auto');
ga('send', 'pageview');
</script>


  </body>

</html>
