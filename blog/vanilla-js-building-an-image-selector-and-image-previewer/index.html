<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossOrigin="anonymous"/><style data-href="/app.ac013dd5715c379e87da.css">.fqxoyvp{display:var(--fqxoyvp-0);flex-direction:var(--fqxoyvp-1);justify-content:var(--fqxoyvp-2);align-content:var(--fqxoyvp-3);align-items:var(--fqxoyvp-4);width:var(--fqxoyvp-5);max-width:var(--fqxoyvp-5);padding:var(--fqxoyvp-7);flex-wrap:var(--fqxoyvp-8);box-sizing:border-box}.a1oo7sao{cursor:pointer;padding:4px 10px;display:inline-block;background:var(--a1oo7sao-1);color:var(--a1oo7sao-2)}.a1oo7sao,.i18iqvvt{border:1px solid #182b1a;border-radius:4px;margin:6px}.i18iqvvt{background:#fff;padding:10px 12px;font-size:1em}.i18iqvvt:focus{outline:none}.snfdkht.i18iqvvt{cursor:pointer;background:#519657;color:#fff}.snfdkht.i18iqvvt:hover{color:#38693c}.md69m4h{z-index:9;position:fixed;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,.4);display:flex;justify-content:center;align-items:center}.m1qhrv2h{z-index:10;width:500px;max-width:90%;min-height:50%;max-height:90%;background:#f5f4e9;border-radius:6px;padding:16px 0}.c1cih5b{flex:1 1}.fszldm{justify-self:flex-end}.m15xpxwi{color:#2b1d0e;-webkit-letter-spacing:2px;-moz-letter-spacing:2px;-ms-letter-spacing:2px;letter-spacing:2px;margin:0}@media screen and (max-width:40em){.m15xpxwi{font-size:20px}}@media screen and (max-width:20em){.m15xpxwi{font-size:18px}}.h5wsek6{height:4rem;position:fixed;top:0;background:#f5f4e9;z-index:1;box-shadow:0 1px 3px rgba(0,0,0,.05);padding:16px 0;-webkit-text-decoration:none;text-decoration:none;width:100%}.i4awmdj{cursor:pointer;color:#2b1d0e;font-size:1.5rem;margin-right:10px}.fpnldgf{height:4rem;box-shadow:0 -1px 3px rgba(0,0,0,.05)}.tw06ds8{text-align:center}@font-face{font-family:Lato;font-style:normal;font-weight:400;src:local("Lato Regular"),local("Lato-Regular"),url(/static/Lato-129179c4eeb1d784d3d3ad95e0b35905.woff2),url(https://fonts.gstatic.com/s/lato/v15/S6uyw4BMUTPHjx4wXiWtFCc.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Cormorant Garamond;font-style:normal;font-weight:400;src:local("Cormorant Garamond Regular"),local("CormorantGaramond-Regular"),url(/static/CormorantGaramond-5733ac592c848166a661326d6d7dd685.woff2),url(https://fonts.gstatic.com/s/cormorantgaramond/v6/co3bmX5slCNuHLi8bLeY9MK7whWMhyjYqXtKky2F7g.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{margin:0;padding:0;font-family:Lato;background:#f5f4e9;color:#2b1d0e;font-size:18px}h1,h2,h3,h4,h5,h6{font-family:Cormorant Garamond}h1,h2{margin-top:4rem}h2{font-weight:600}h3{margin-top:3rem}h4{margin-top:2rem}p{line-height:1.8}a{color:#519657}a,a:link,a:visited{text-decoration:none}a:active,a:hover{color:#38693c}pre{overflow:scroll;border-radius:4px;padding:10px 20px;font-size:.8rem}pre,pre code{background:#444;color:#63e463}pre code{border:none;padding:0;border-radius:0;margin:0}code{color:#3eab3e;background:rgba(99,228,99,.1);border-radius:4px;padding:2px 4px;margin:0 4px;font-size:.9rem}blockquote{border-left:6px solid rgba(179,195,180,.5);padding-left:32px;margin:32px 0}li{margin-bottom:8px}.m18vmv4p{padding:6rem 0 2rem}.m1p35dyn{max-width:95%;width:800px}</style><meta name="generator" content="Gatsby 2.0.31"/><title data-react-helmet="true">Blog | Vanilla JS: Building an Image Selector and Image Previewer</title><link as="script" rel="preload" href="/0-43b751d6e4b3f1db19a5.js"/><link as="script" rel="preload" href="/component---src-templates-article-tsx-b562facbfa4e4e9b45e1.js"/><link as="script" rel="preload" href="/1-3919a7c707d0d50ea252.js"/><link as="script" rel="preload" href="/app-f9877ef84a31f36707be.js"/><link as="script" rel="preload" href="/webpack-runtime-b877417d2c045a2195d9.js"/><link rel="preload" href="/static/d/168/path---blog-vanilla-js-building-an-image-selector-and-image-previewer-2-ea-d86-9awHPaJyRRXJvP9ES5AszfmAxy4.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div direction="column" class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:column;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px;--fqxoyvp-8:nowrap"><div class="h5wsek6 fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><div class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:center;--fqxoyvp-5:50%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><div style="display:flex;align-items:center"><a href="/"><h2 class="m15xpxwi">Keith Alpichi</h2></a></div></div><div class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-end;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:50%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><a href="https://www.linkedin.com/in/keithalpichi" class="i4awmdj"><i class="fab fa-linkedin"></i></a><a href="https://github.com/keithalpichi" class="i4awmdj"><i class="fab fa-github-square"></i></a><a href="https://twitter.com/keithalpichi" class="i4awmdj"><i class="fab fa-twitter-square"></i></a><a class="i4awmdj" href="/about"><i class="fas fa-info-circle"></i></a></div></div><div class="m18vmv4p fqxoyvp" direction="column" style="--fqxoyvp-0:flex;--fqxoyvp-1:column;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:center;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><div class="m1p35dyn fqxoyvp" style="--fqxoyvp-0:inline;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:wrap"><h1 style="line-height:1">Vanilla JS: Building an Image Selector and Image Previewer</h1><h3 style="color:#b3c3b4;margin-top:0">Monday, May 28th 2018</h3><div direction="row" class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px;--fqxoyvp-8:wrap"><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">javascript</a><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">html</a><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">css</a></div><div style="margin-top:64px"><blockquote>
<p>TLDR: the final demo and code can be found <a href="https://jsfiddle.net/keithalpichi/bxhedode/">here</a></p>
</blockquote>
<h2>Goal</h2>
<p>The goals we will achieve today are the following:</p>
<ul>
<li>to select an image to preview</li>
<li>to preview the selected image</li>
</ul>
<p>Implementing the first point is trivial. However, the second will require the use of a <code>FileReader</code> and Javascript events to handle the image selection event.</p>
<h2>Step 1: ImageÂ Selector</h2>
<p>First we'll provide an HTML input with the type as file.</p>
<pre><code>&#x3C;input type="file" />
</code></pre>
<p>This will render a button with the title "Choose File". Simply clicking on the button will open a window so you can select a file. Since we only want to allow image files we can provide the accept attribute. It now will look like this:</p>
<pre><code>&#x3C;input type="file" accept="image/*" />
</code></pre>
<p>This attribute takes a comma-separated list of allowed file extensions or MIME types. Here we are accepting any image type.</p>
<p>At the moment, selecting a file won't show any changes. Let's build the image previewer next to display the selected image.</p>
<h2>Step 2: Image Previewer</h2>
<p>We will need an <code>img</code> element to display the selected image. Before an image is selected we will show a default image.</p>
<pre><code>&#x3C;img src="http://placehold.it/75X75"/>
&#x3C;input type="file" accept="image/*" />
</code></pre>
<p>What we want to do now is listen for the change event that occurs when an image is selected. We'll then have access to the selected file. Before we do we need to update the HTML elements with IDs so we can select them with Javascript.</p>
<pre><code>&#x3C;img id="img" src="http://placehold.it/75X75"/>
&#x3C;input type="file" id="file" accept="image/*" />
</code></pre>
<p>Now we'll start to build the Javascript. We first need a <code>FileReader</code>. This will allow us to read the contents of the selected file.</p>
<pre><code>const reader = new FileReader();
const fileInput = document.getElementById("file");
fileInput.addEventListener('change', e => {
  const f = e.target.files[0];
  reader.readAsDataURL(f);
})
</code></pre>
<p>In this example, we instantiate a new <code>FileReader</code>. When a file is selected the change event will be emitted. We then call the <code>FileReader</code>'s <code>readAsDataURL</code> function with the file. This function will start to read the file as a data URL.</p>
<p>We'll also need to implement the onload event handler that gets called when the load event is emitted. This event occurs when the file is finished being read.</p>
<pre><code>const reader = new FileReader();
const fileInput = document.getElementById("file");
const img = document.getElementById("img");
reader.onload = e => {
  img.src = e.target.result;
}
fileInput.addEventListener('change', e => {
  const f = e.target.files[0];
  reader.readAsDataURL(f);
})
</code></pre>
<p>The result of the file reader will be a base64 encoded string that we can provide to the image element's src attribute. That's it!</p>
<h2>Styling</h2>
<p>It works well but it looks like it was built in the early 2000s. Let's make some styling changes such as getting rid of the default "Choose File" button and allowing the image itself be the source of the click event that opens the image selection window.</p>
<p>By simply wrapping the img with a label element we can make the image act as the "button" that opens the image selection window.</p>
<pre><code>&#x3C;label for="file">&#x3C;img id="img" src="http://placehold.it/75X75"/>&#x3C;/label>
&#x3C;input type="file" id="file" />
</code></pre>
<p>The important concept is the <code>for</code> attribute. By matching this value with the file input's ID, it let's HTML know that this label is related to that input and that the label will now open the image selection window. Since we're wrapping the image with the label it makes it look like clicking on the image opens the image selection window.</p>
<p>If you try clicking on the image now the image selection window will open. Sweet, huh? However, the "Choose File" button is still present. With a simple change to CSS we can hide it.</p>
<pre><code>#file {
  display: none;
}
</code></pre>
<p>Now, only the image is present. Cool! It's important to know that we don't want to get rid of the file input, we just want to hide it.</p>
<h2>Conclusion</h2>
<p>Building HTML forms is common in web development. Someday, hopefully, you'll get requests to build a UI for users to select, preview, and upload images. I hope this tutorial has made it clear that building an image selector and image previewer is not only simple but can be done in vanilla Javascript using the browsers native API.</p>
<p>You can find the final working demo and code <a href="https://jsfiddle.net/keithalpichi/bxhedode/">here</a></p>
<h3>What About FileÂ Uploads?</h3>
<p>Okay, selecting an image and seeing it render in the browser is nice but it's not very practical. Usually you want to perform some other steps afterwards; such as upload it somewhere, save it to S3, or send it to our server to do some image manipulation or machine learning. How to upload a file to a server will be for a future article. So stay tuned.</p></div><p>Thank you for reading my article. Make sure to check out some related articles by following one of the tags below.</p><div direction="row" class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px;--fqxoyvp-8:wrap"><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">all tags</a><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">javascript</a><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">html</a><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">css</a></div></div></div><div class="fpnldgf fqxoyvp" style="--fqxoyvp-0:inline;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:wrap"><p class="tw06ds8">Aloha, World ðŸ¤™</p></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-article-tsx","jsonName":"blog-vanilla-js-building-an-image-selector-and-image-previewer-2ea","path":"/blog/vanilla-js-building-an-image-selector-and-image-previewer"};window.dataPath="168/path---blog-vanilla-js-building-an-image-selector-and-image-previewer-2-ea-d86-9awHPaJyRRXJvP9ES5AszfmAxy4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.ac013dd5715c379e87da.css","/app-f9877ef84a31f36707be.js"],"component---src-templates-article-tsx":["/component---src-templates-article-tsx-b562facbfa4e4e9b45e1.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-560cd5e188a2c4ca4464.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx.4abde67b4aa83d42a197.css","/component---src-pages-404-tsx-c7b8eb1860589dcbc96e.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-cafc1a50078a611598b8.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx.67ee1bf9ca9319deaa27.css","/component---src-pages-index-tsx-5a4d69ba4bcff4557c81.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-9a553f1170f6aa152689.js"]};/*]]>*/</script><script src="/webpack-runtime-b877417d2c045a2195d9.js" async=""></script><script src="/app-f9877ef84a31f36707be.js" async=""></script><script src="/1-3919a7c707d0d50ea252.js" async=""></script><script src="/component---src-templates-article-tsx-b562facbfa4e4e9b45e1.js" async=""></script><script src="/0-43b751d6e4b3f1db19a5.js" async=""></script></body></html>