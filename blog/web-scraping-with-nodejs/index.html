<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossOrigin="anonymous"/><style data-href="/app.654f3adca362e508263b.css">.fqxoyvp{display:var(--fqxoyvp-0);flex-direction:var(--fqxoyvp-1);justify-content:var(--fqxoyvp-2);align-content:var(--fqxoyvp-3);align-items:var(--fqxoyvp-4);width:var(--fqxoyvp-5);max-width:var(--fqxoyvp-5);padding:var(--fqxoyvp-7);flex-wrap:var(--fqxoyvp-8);box-sizing:border-box}.a1oo7sao{cursor:pointer;padding:4px 10px;display:inline-block;background:var(--a1oo7sao-1);color:var(--a1oo7sao-2)}.a1oo7sao,.i18iqvvt{border:1px solid #182b1a;border-radius:4px;margin:6px}.i18iqvvt{background:#fff;padding:10px 12px;font-size:1em}.i18iqvvt:focus{outline:none}.snfdkht.i18iqvvt{cursor:pointer;background:#519657;color:#fff}.snfdkht.i18iqvvt:hover{color:#38693c}.md69m4h{z-index:9;position:fixed;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,.4);display:flex;justify-content:center;align-items:center}.m1qhrv2h{z-index:10;width:500px;max-width:90%;min-height:50%;max-height:90%;background:#f5f4e9;border-radius:6px;padding:16px 0}.c1cih5b{flex:1 1}.fszldm{justify-self:flex-end}.m15xpxwi{color:#2b1d0e;-webkit-letter-spacing:2px;-moz-letter-spacing:2px;-ms-letter-spacing:2px;letter-spacing:2px;margin:0}@media screen and (max-width:40em){.m15xpxwi{font-size:20px}}@media screen and (max-width:20em){.m15xpxwi{font-size:18px}}.h5wsek6{height:4rem;position:fixed;top:0;background:#f5f4e9;z-index:1;box-shadow:0 1px 3px rgba(0,0,0,.05);padding:16px 0;-webkit-text-decoration:none;text-decoration:none;width:100%}.i4awmdj{cursor:pointer;color:#2b1d0e;font-size:1.5rem;margin-right:10px}.fpnldgf{height:4rem;box-shadow:0 -1px 3px rgba(0,0,0,.05)}.tw06ds8{text-align:center}@font-face{font-family:Lato;font-style:normal;font-weight:400;src:local("Lato Regular"),local("Lato-Regular"),url(/static/Lato-129179c4eeb1d784d3d3ad95e0b35905.woff2),url(https://fonts.gstatic.com/s/lato/v15/S6uyw4BMUTPHjx4wXiWtFCc.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Cormorant Garamond;font-style:normal;font-weight:400;src:local("Cormorant Garamond Regular"),local("CormorantGaramond-Regular"),url(/static/CormorantGaramond-5733ac592c848166a661326d6d7dd685.woff2),url(https://fonts.gstatic.com/s/cormorantgaramond/v6/co3bmX5slCNuHLi8bLeY9MK7whWMhyjYqXtKky2F7g.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{margin:0;padding:0;font-family:Lato;background:#f5f4e9;color:#2b1d0e;font-size:18px}h1,h2,h3,h4,h5,h6{font-family:Cormorant Garamond}h1,h2{margin-top:4rem}h2{font-weight:600}h3{margin-top:3rem}h4{margin-top:2rem}p{line-height:1.8}a{color:#519657}a,a:link,a:visited{text-decoration:none}a:active,a:hover{color:#38693c}pre{overflow:scroll;border-radius:4px;padding:10px 20px;font-size:.8rem}pre,pre code{background:#444;color:#63e463}pre code{border:none;padding:0;border-radius:0;margin:0}code{color:#3eab3e;background:rgba(99,228,99,.1);border-radius:4px;padding:2px 4px;margin:0 4px;font-size:.9rem}blockquote{border-left:6px solid rgba(179,195,180,.5);padding-left:32px;margin:32px 0}li{margin-bottom:8px}.m18vmv4p{padding:6rem 0 2rem}.m1p35dyn{max-width:95%;width:800px}</style><meta name="generator" content="Gatsby 2.0.31"/><title data-react-helmet="true">Blog | Web Scraping With NodeJS</title><link as="script" rel="preload" href="/webpack-runtime-305194e71806ff009bde.js"/><link as="script" rel="preload" href="/app-65ddc085a1e9fca3c501.js"/><link as="script" rel="preload" href="/0-43b751d6e4b3f1db19a5.js"/><link as="script" rel="preload" href="/1-3919a7c707d0d50ea252.js"/><link as="script" rel="preload" href="/component---src-templates-article-tsx-b562facbfa4e4e9b45e1.js"/><link rel="preload" href="/static/d/270/path---blog-web-scraping-with-nodejs-754-8c1-rZZ6w4q3N8RtSqNvtBpKk8iplA.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div direction="column" class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:column;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px;--fqxoyvp-8:nowrap"><div class="h5wsek6 fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><div class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:center;--fqxoyvp-5:50%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><div style="display:flex;align-items:center"><a href="/"><h2 class="m15xpxwi">Keith Alpichi</h2></a></div></div><div class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-end;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:50%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><a href="https://www.linkedin.com/in/keithalpichi" class="i4awmdj"><i class="fab fa-linkedin"></i></a><a href="https://github.com/keithalpichi" class="i4awmdj"><i class="fab fa-github-square"></i></a><a href="https://twitter.com/keithalpichi" class="i4awmdj"><i class="fab fa-twitter-square"></i></a><a class="i4awmdj" href="/about"><i class="fas fa-info-circle"></i></a></div></div><div class="m18vmv4p fqxoyvp" direction="column" style="--fqxoyvp-0:flex;--fqxoyvp-1:column;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:center;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:nowrap"><div class="m1p35dyn fqxoyvp" style="--fqxoyvp-0:inline;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:wrap"><h1 style="line-height:1">Web Scraping With NodeJS</h1><h3 style="color:#b3c3b4;margin-top:0">Wednesday, May 20th 2020</h3><div direction="row" class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px;--fqxoyvp-8:wrap"><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">nodejs</a></div><div style="margin-top:64px"><h2>What is Web Scraping</h2>
<p>There is one application every software engineer should build. That application is a web scraper. A web scraper is a service that programmatically requests and parses HTML content served from a website. Once you have the HTML content of a website you can parse it for specific data.</p>
<p>In this article I'm going to show you how to build a web scraper to collect product inventory of an e-commerce site. It will give you a good grasp of the hypertext part of HTTP and how browsers use HTML to construct and parse the web pages you view and manipulate everyday.</p>
<h2>Tools</h2>
<p>There are few libraries we'll use to help us make web scraping a little easier.</p>
<h3>Server-Side Language</h3>
<p>Since we're requesting and parsing HTML programmatically we'll need a server-side language. We'll use NodeJS for this.</p>
<h3>Requesting HTML</h3>
<p>We need to request the HTML from the website. Although we could do this natively by using the http or https modules in NodeJS's standard library we're going to use <a href="https://github.com/axios/axios">axios</a> to help us out.</p>
<h3>Parsing HTML</h3>
<p>We'll also make the parsing work easier on ourselves by using <a href="https://github.com/jsdom/jsdom">jsdom</a>. jsdom is a "JavaScript implementation of various web standards, for use with Node.js". This library allows us to perform common browser API commands to parse the HTML. We could proceed without it but then parsing the HTML would be much more difficult.</p>
<h2>Workflow</h2>
<p>We'll first need an understanding of the HTML content of the webpage we'd like to request. Since our goal is to collect product inventory we should know the URL of the product we're interested in and some HTML and CSS elements that determine the inventory status of the product. E-commerce sites share common HTML user interfaces:</p>
<ul>
<li>input fields that accept a quantity may mean that an item is in-stock</li>
<li>missing or disabled quantity input fields may mean that the item is out-of-stock</li>
<li>heading or paragraph tags may display the text "In Stock" or "Out of Stock"</li>
<li>buttons that are not disabled and contain "Add to Cart" most likely means that an item is in-stock</li>
<li>disabled "Add to Cart" buttons may mean that the item is out-of-stock</li>
</ul>
<p>We can use this information to scrape the HTML and determine whether an item is in stock or not. Let's assume we're interested in scraping the fictional website <code>https://example.com/product/1</code>. After some investigation in a web browser we've found that a product is in-stock when a <code>p</code> tag with the class <code>in-stock</code> exists in the HTML. We'll now use axios to request the HTML.</p>
<pre><code>const resp = await axios.default.get('https://example.com/product/1')
</code></pre>
<p>Axios returns a response object. The <code>data</code> property of this object will contain the HTML. Let's now use jsdom to parse it.</p>
<pre><code>const dom = new jsdom.JSDOM(resp.data)
</code></pre>
<p>Filtering the HTML for the element with jsdom is quite easy.</p>
<pre><code>const element = dom.window.document.querySelector('p.in-stock')
if (element) {
  console.log("The product is in-stock. Go buy it now!")
}
</code></pre>
<p>That's web scraping for you. Pretty easy, right?</p>
<h2>Improving Our Solution</h2>
<p>This was a very simple example of web scraping. However, to make it more interesting or effective we could have:</p>
<ul>
<li>used a headless browser like Puppeteer or Selenium to load the initial HTML and execute the Javascript to present the real interface a user would be interacting with. This becomes even more important for sites that are implemented as <a href="https://en.wikipedia.org/wiki/Single-page_application">SPA</a>'s.</li>
<li>used <a href="https://en.wikipedia.org/wiki/Cron">cron</a> or <a href="https://www.launchd.info/">launchd</a> to run the scraping task on a time-based schedule</li>
<li>scraped for multiple products across multiples sites simultaneously</li>
<li>scraped across multiple sites to find the one that had the cheapest product in-stock</li>
</ul>
<h2>Limitations</h2>
<p>Web scraping has it's limitations. It is very common for websites to prevent clients from abusing the website content and services by:</p>
<ul>
<li>hiding product information behind a log-in. A user has to authenticate itself to access product information. With web scraping you'd have to leverage cookies to ensure you're proving your identity to the website.</li>
<li>blocking IP addresses that make many simultaneous requests. To work around this you'd have to use a proxy to shuffle the IP addresses your web scraper uses.</li>
</ul>
<h2>Conclusion</h2>
<p>In this article we used NodeJS, jsdom, and axios to scrape the web. We looked at how we could improve our implementation. We considered the limitations with web scraping.</p></div><p>Thank you for reading my article. Make sure to check out some related articles by following one of the tags below.</p><div direction="row" class="fqxoyvp" style="--fqxoyvp-0:flex;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px;--fqxoyvp-8:wrap"><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">all tags</a><a color="success" class="a1oo7sao" style="--a1oo7sao-1:#519657;--a1oo7sao-2:#FFFFFF">nodejs</a></div></div></div><div class="fpnldgf fqxoyvp" style="--fqxoyvp-0:inline;--fqxoyvp-1:row;--fqxoyvp-2:flex-start;--fqxoyvp-3:stretch;--fqxoyvp-4:stretch;--fqxoyvp-5:100%;--fqxoyvp-7:0px 16px;--fqxoyvp-8:wrap"><p class="tw06ds8">Aloha, World 🤙</p></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-article-tsx","jsonName":"blog-web-scraping-with-nodejs-754","path":"/blog/web-scraping-with-nodejs"};window.dataPath="270/path---blog-web-scraping-with-nodejs-754-8c1-rZZ6w4q3N8RtSqNvtBpKk8iplA";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.654f3adca362e508263b.css","/app-65ddc085a1e9fca3c501.js"],"component---src-templates-article-tsx":["/component---src-templates-article-tsx-b562facbfa4e4e9b45e1.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-560cd5e188a2c4ca4464.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx.4abde67b4aa83d42a197.css","/component---src-pages-404-tsx-dc40912f5c8ff4bea322.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-2766eef2bf52db10b8d0.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx.0d82ef3b9f5d3fc298aa.css","/component---src-pages-index-tsx-bbbc9fbb418fe3261273.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-9a553f1170f6aa152689.js"]};/*]]>*/</script><script src="/component---src-templates-article-tsx-b562facbfa4e4e9b45e1.js" async=""></script><script src="/1-3919a7c707d0d50ea252.js" async=""></script><script src="/0-43b751d6e4b3f1db19a5.js" async=""></script><script src="/app-65ddc085a1e9fca3c501.js" async=""></script><script src="/webpack-runtime-305194e71806ff009bde.js" async=""></script></body></html>